/**
 * 
 */
package com.pramati.imaginea.bObj;

import java.io.BufferedInputStream;
import java.io.File;
import java.net.URL;
import java.net.URLConnection;

import com.pramati.imaginea.base.WebElement;
import com.pramati.imaginea.base.pageContent;

/** This Concrete class is an implementation of web element
 * and used to represent a Link in the web page.
 * All the methods defined in this class are  specific to how weblink should behave. 
 * @author anandu
 *
 */
public class WebLink implements WebElement {
	
	/**This represents an URL of the link on the page.
	 * This link is used to fetch data and that data 
	 * will get saved later on
	 * 
	 */
	private URL linkUrl;
	
	/** This byte array is used to hold data after hitting the
	 * url
	 * 
	 */
	private byte[] content = new byte[5000];
	private boolean loaded;
	/**
	 * 
	 */
	public WebLink(URL url) {
		this.linkUrl = url;
		this.loaded = false;
	}
	/**This method must be called after loading the web page
	 * @return the content
	 */
	public byte[] getContent() {
		
		if(loaded) {
			return content;
		}
		else {
			return new byte[0];
		}
	}

	/* (non-Javadoc)
	 * @see com.pramati.imaginea.base.WebElement#save(java.lang.Object)
	 */
	@Override
	public void save(File targetFile) throws Exception {
		
	}
	/* (non-Javadoc)
	 * @see com.pramati.imaginea.base.WebElement#load(java.lang.Object)
	 */
	@Override
	public void load() throws Exception {
		
		URLConnection urlc = linkUrl.openConnection();
		BufferedInputStream buffer = new BufferedInputStream(urlc.getInputStream());
		buffer.read(content);
		loaded = true;
	}

}
